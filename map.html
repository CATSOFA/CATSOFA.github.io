<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>Daum 지도 테스트</title>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<!-- <script type="text/javascript">

</script> -->
<style>
* {margin:0; padding:0}
html, body {height:100%}
#map {width:100%; height:100%}
</style>
</head>
<body>

	<div id="map"></div>	
	
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=252a5b49be4cff2ea2416e616d730a26"></script>
	<script>
	
	
		/****************************************************************************/
		
		var a,
			b;
		
		getLocation();
		
		function getLocation() {
		  if (navigator.geolocation) { // GPS를 지원하면
			navigator.geolocation.getCurrentPosition(function(position) {
			  a = position.coords.latitude;
			  b = position.coords.longitude;
			  //console.log(position.coords.latitude + ' ' + position.coords.longitude);
			  console.log(a + ', ' + b);
			  startMap(a,b); //지도 실행
			}, function(error) {
			  console.error(error);
			}, {
			  enableHighAccuracy: false,
			  maximumAge: 0,
			  timeout: Infinity
			});
		  } else {
			//alert('GPS를 지원하지 않습니다');
			$('#map').text('GPS를 확인하세요.');
		  }
		}
		
		
		/****************************************************************************/
		
		
		function startMap(a,b){
		
			/* 지도 객체 생성 */
			var container = document.getElementById('map');
			var options = {
				//center: new daum.maps.LatLng(37.522612, 126.921778),
				center: new daum.maps.LatLng(a, b),
				level: 3
			};
			
			var map = new daum.maps.Map(container, options);
			
			// 일반 지도와 스카이뷰로 지도 타입을 전환할 수 있는 지도타입 컨트롤을 생성합니다
			var mapTypeControl = new daum.maps.MapTypeControl();

			// 지도에 컨트롤을 추가해야 지도위에 표시됩니다
			// daum.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
			map.addControl(mapTypeControl, daum.maps.ControlPosition.TOPRIGHT);

			// 지도 확대 축소를 제어할 수 있는  줌 컨트롤을 생성합니다
			var zoomControl = new daum.maps.ZoomControl();
			map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);
			
			
			/*
			// 마커가 표시될 위치입니다 
			var markerPosition  = new daum.maps.LatLng(37.522612, 126.921778); //하나금융투자
			
			// 마커를 생성합니다
			var marker = new daum.maps.Marker({
				position: markerPosition
			});

			// 마커가 지도 위에 표시되도록 설정합니다
			marker.setMap(map);

			// 아래 코드는 지도 위의 마커를 제거하는 코드입니다
			// marker.setMap(null);  
			
			*/
			
			// 마커를 표시할 위치와 title 객체 배열입니다 
			var positions = [
				{
					title: '하나금융투자', 
					latlng: new daum.maps.LatLng(37.522612, 126.921778)
				}
				/*
				{
					title: '현재위치', 
					latlng: new daum.maps.LatLng(a, b)
				}
				*/
			];

			// 마커 이미지의 이미지 주소입니다
			//var imageSrc = "http://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png"; 
				
			for (var i = 0; i < positions.length; i ++) {
				
				// 마커 이미지의 이미지 크기 입니다
				//var imageSize = new daum.maps.Size(24, 35); 
				
				// 마커 이미지를 생성합니다    
				//var markerImage = new daum.maps.MarkerImage(imageSrc, imageSize); 
				
				// 마커를 생성합니다
				var marker = new daum.maps.Marker({
					map: map, // 마커를 표시할 지도
					position: positions[i].latlng // 마커를 표시할 위치
					//title : positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
					//image : markerImage // 마커 이미지 
				});
			}
			
			
			
			// 지도에 표시할 원을 생성합니다
			var circle = new daum.maps.Circle({
				center : new daum.maps.LatLng(a, b),  // 원의 중심좌표 입니다 
				radius: 10, // 미터 단위의 원의 반지름입니다 
				strokeWeight: 5, // 선의 두께입니다 
				strokeColor: '#f00', // 선의 색깔입니다
				strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
				strokeStyle: 'solid', // 선의 스타일 입니다
				fillColor: '#f00', // 채우기 색깔입니다
				fillOpacity: 0.5  // 채우기 불투명도 입니다    
			}); 

			// 지도에 원을 표시합니다 
			circle.setMap(map); 
			
			
			
			
			
		}
		
		
		
		
	</script>
</body>
</html>
